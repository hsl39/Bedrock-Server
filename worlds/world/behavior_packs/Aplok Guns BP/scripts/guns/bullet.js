/**
 * Hello, u're looking to steal my code, good luck!
 * If I were you I would at least ask permission before that,
 * I would be happy instead of you stealing my code and having to take drastic measures.
 * Well, thank you, Gabriel Aplok.
 *
 * Hm, u're searching for my advanced bullet code lol?
 */

const _0x1da2fa=_0x132e;(function(_0x45d092,_0x2ce326){const _0x223240=_0x132e,_0x49689c=_0x45d092();while(!![]){try{const _0x562a5d=parseInt(_0x223240(0x1ec))/0x1*(parseInt(_0x223240(0x1ee))/0x2)+-parseInt(_0x223240(0x233))/0x3*(parseInt(_0x223240(0x1f5))/0x4)+-parseInt(_0x223240(0x1eb))/0x5+-parseInt(_0x223240(0x217))/0x6+parseInt(_0x223240(0x218))/0x7*(-parseInt(_0x223240(0x209))/0x8)+parseInt(_0x223240(0x228))/0x9+-parseInt(_0x223240(0x219))/0xa*(-parseInt(_0x223240(0x1f2))/0xb);if(_0x562a5d===_0x2ce326)break;else _0x49689c['push'](_0x49689c['shift']());}catch(_0x233cd7){_0x49689c['push'](_0x49689c['shift']());}}}(_0x5763,0x6630a));import{system,Player,EntityComponentTypes,EquipmentSlot,EntityDamageCause,ItemComponentTypes,EnchantmentTypes}from'@minecraft/server';import{Vector}from'../vector';import{playSound}from'../util';class BulletDamage{constructor(_0x286fc4,_0x26b821,_0xfffdd8){const _0x327e73=_0x132e;this['gun']=_0x286fc4,this[_0x327e73(0x214)]=_0x26b821,this[_0x327e73(0x22f)]=_0xfffdd8;}}function _0x5763(){const _0x5f3967=['damage','minecraft:breeze','subtract','minecraft:skeleton','84066YTPjIj','Enchantable','nameTag','9x19pr','Head','minecraft:villager','gabrielaplok:juggernaut_chestplate','level','getEntityHit','M4A1','minecraft:stray','bullet_','Feet','helmet','minecraft:piglin_brute','getComponent','minecraft:drowned','applyDamage','getDamageChance','minecraft:blaze','\x22}]}}]}','equipments','minecraft:husk','random.break','location','runCommandAsync','bullet_762x51','map','add','HK\x20MP5A5','Health','setEquipment','projectile','362900hrPLuP','2MqOwGe','effect.player.splat','47638PtwsAe','getEquipment','Offhand','replaceitem\x20entity\x20@s\x20slot.armor.head\x200\x20air','306515pXuLWG','run','Durability','40amrxjZ','bullet_50ae','minecraft:piglin','minecraft:zombie_villager','Glock','bullet.impact.metal','dimension','bullet_545x39','minecraft:shield','typeId','gabrielaplok:bullet_spark','AK-47','chest','spawnParticle','round','minecraft:player','Chest','minecraft:pillager','min','\x22},\x20{\x22text\x22:\x20\x22','80GACwkA','source','Mossberg\x20500','FN\x20FAL','death.attack.bullet','getEnchantment','isSneaking','minecraft:wandering_trader','minecraft:bogged','zeroAttack','runCommand','caliber','tellraw\x20@a\x20{\x22rawtext\x22:\x20[{\x22translate\x22:\x20\x22','random','389568UpGecd','536326sPcnRb','500sQoWub','push','isValid','minecraft:evocation_illager','minecraft:zombie_villager_v2','gabrielaplok:add_hitmark','Equippable','includes','minecraft:wither','value','headshot','gabrielaplok:bullet','maxDurability','minecraft:wither_skeleton','bullet_556x45','1454310NvnZYf','gabrielaplok:bullet_impact','gun','Legs','bullet.impact.flesh','minecraft:vindicator','get'];_0x5763=function(){return _0x5f3967;};return _0x5763();}class ArmorProtection{constructor(_0x279a8b,_0x144bbc){this['type']=_0x279a8b,this['value']=_0x144bbc;}}function _0x132e(_0x2bb88e,_0xf812f){const _0x576328=_0x5763();return _0x132e=function(_0x132e7f,_0x46d4e9){_0x132e7f=_0x132e7f-0x1e6;let _0x52577b=_0x576328[_0x132e7f];return _0x52577b;},_0x132e(_0x2bb88e,_0xf812f);}const DAMAGE={'bullet_1':new BulletDamage('AK-12',_0x1da2fa(0x1fc),0x8),'bullet_2':new BulletDamage(_0x1da2fa(0x200),'bullet_762x39',0x9),'bullet_3':new BulletDamage('AWP','bullet_762x51',0x28),'bullet_4':new BulletDamage('.50\x20Desert\x20Eagle',_0x1da2fa(0x1f6),0xe),'bullet_5':new BulletDamage(_0x1da2fa(0x20c),_0x1da2fa(0x24d),0x8),'bullet_6':new BulletDamage(_0x1da2fa(0x1f9),_0x1da2fa(0x236),0x6),'bullet_7':new BulletDamage('M249','bullet_556x45',0x8),'bullet_8':new BulletDamage(_0x1da2fa(0x23c),_0x1da2fa(0x227),0x7),'bullet_9':new BulletDamage(_0x1da2fa(0x20b),'bullet_12gauge',0x7),'bullet_10':new BulletDamage(_0x1da2fa(0x1e7),'9x19pr',0x6)},ARMOR_PROTECTION={'gabrielaplok:helmet_6b47':new ArmorProtection(_0x1da2fa(0x240),0.24),'gabrielaplok:vest_6b3':new ArmorProtection(_0x1da2fa(0x201),0.48),'gabrielaplok:juggernaut_helmet':new ArmorProtection(_0x1da2fa(0x240),0.24),'gabrielaplok:juggernaut_chestplate':new ArmorProtection('chest',0.86)},ENTITIES_SUPPORT_HEADSHOT=[_0x1da2fa(0x246),_0x1da2fa(0x211),_0x1da2fa(0x230),_0x1da2fa(0x243),_0x1da2fa(0x21c),_0x1da2fa(0x249),'minecraft:npc',_0x1da2fa(0x1f7),_0x1da2fa(0x241),_0x1da2fa(0x206),_0x1da2fa(0x204),_0x1da2fa(0x232),_0x1da2fa(0x23d),_0x1da2fa(0x238),'minecraft:villager_v2',_0x1da2fa(0x22d),_0x1da2fa(0x210),_0x1da2fa(0x221),_0x1da2fa(0x226),'minecraft:zombie','minecraft:zombie_pigman',_0x1da2fa(0x1f8),_0x1da2fa(0x21d)],getArmor=_0x6e6d56=>{const _0xd8fe95=_0x1da2fa,_0x5dcae6=_0x6e6d56?.[_0xd8fe95(0x242)](EntityComponentTypes[_0xd8fe95(0x21f)]),_0x31768d=[],_0xfeb882=(_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot['Mainhand'])?.['typeId']==='minecraft:shield'||_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot[_0xd8fe95(0x1f0)])?.['typeId']===_0xd8fe95(0x1fd))&&_0x6e6d56[_0xd8fe95(0x20f)];if(_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot[_0xd8fe95(0x237)])?.[_0xd8fe95(0x1fe)])_0x31768d['push'](_0x5dcae6?.['getEquipment'](EquipmentSlot['Head']));if(_0x5dcae6?.['getEquipment'](EquipmentSlot[_0xd8fe95(0x205)])?.[_0xd8fe95(0x1fe)])_0x31768d['push'](_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot['Chest']));if(_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot[_0xd8fe95(0x22b)])?.[_0xd8fe95(0x1fe)])_0x31768d[_0xd8fe95(0x21a)](_0x5dcae6?.['getEquipment'](EquipmentSlot[_0xd8fe95(0x22b)]));if(_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot[_0xd8fe95(0x23f)])?.['typeId'])_0x31768d['push'](_0x5dcae6?.[_0xd8fe95(0x1ef)](EquipmentSlot[_0xd8fe95(0x23f)]));return{'equipments':_0x31768d,'zeroAttack':_0xfeb882};},calcDamage=(_0x55f1f9,_0x1b9559,_0xafc8b6,_0x303d33,_0x2afa25)=>{const _0x5967d9=_0x1da2fa,_0x437b74=getArmor(_0xafc8b6),_0x275133=[];let _0x3232a5=0x1;for(const _0xff385 of _0x437b74[_0x5967d9(0x248)]){const _0x425300=ARMOR_PROTECTION[_0xff385?.[_0x5967d9(0x1fe)]];_0x275133[_0x5967d9(0x21a)](_0xff385?.['typeId']),_0x425300&&(_0x3232a5-=_0x425300[_0x5967d9(0x222)]);}_0x275133[_0x5967d9(0x220)](_0x5967d9(0x239))&&(_0x55f1f9[_0x5967d9(0x1fb)][_0x5967d9(0x202)]('gabrielaplok:bullet_spark',_0x55f1f9[_0x5967d9(0x24b)]),_0x55f1f9['dimension'][_0x5967d9(0x202)](_0x5967d9(0x1ff),_0x55f1f9[_0x5967d9(0x24b)]),_0x55f1f9[_0x5967d9(0x1fb)][_0x5967d9(0x202)](_0x5967d9(0x229),_0x55f1f9['location']),playSound(_0x55f1f9['dimension'],_0x5967d9(0x1fa),_0x55f1f9[_0x5967d9(0x24b)],0x14,{'volume':0.25}));_0x1b9559['isSneaking']&&(_0x303d33+=1.5);let _0x104531=_0x303d33*_0x3232a5,_0x2a087f=1.5,_0x384785=new Vector(_0x55f1f9[_0x5967d9(0x24b)]['x'],_0x55f1f9[_0x5967d9(0x24b)]['y'],_0x55f1f9['location']['z']),_0x256646=new Vector(_0xafc8b6[_0x5967d9(0x24b)]['x'],_0xafc8b6['location']['y'],_0xafc8b6[_0x5967d9(0x24b)]['z']),_0x1c18c1=_0x256646[_0x5967d9(0x1e6)](new Vector(0x0,_0x2a087f,0x0)),_0x3eaff5=_0x384785[_0x5967d9(0x231)](_0x256646),_0x208d91=![];if(ENTITIES_SUPPORT_HEADSHOT[_0x5967d9(0x220)](_0xafc8b6['typeId'])&&_0x3eaff5['y']>_0x2a087f){const _0x3d1e05=_0xafc8b6['getComponent'](EntityComponentTypes[_0x5967d9(0x21f)]);if(_0x275133[_0x5967d9(0x24e)](_0x15d7b1=>_0x15d7b1[_0x5967d9(0x220)]('helmet'))['length']>=0x1&&_0x3d1e05&&_0x3d1e05[_0x5967d9(0x1ef)](EquipmentSlot['Head'])){const _0x494e84=_0x3d1e05[_0x5967d9(0x1ef)](EquipmentSlot[_0x5967d9(0x237)]),_0x5caed2=_0x494e84[_0x5967d9(0x242)](ItemComponentTypes[_0x5967d9(0x1f4)]),_0x3079fe=_0x494e84[_0x5967d9(0x242)](ItemComponentTypes[_0x5967d9(0x234)]),_0x5a43ca=_0x3079fe[_0x5967d9(0x20e)](EnchantmentTypes[_0x5967d9(0x22e)]('unbreaking')),_0x37c92e=ARMOR_PROTECTION[_0x494e84['typeId']];_0x5caed2&&_0x5caed2[_0x5967d9(0x245)](_0x5a43ca?.[_0x5967d9(0x23a)]??0x0)>Math[_0x5967d9(0x216)]()*0xc8&&(_0x5caed2['damage']=Math[_0x5967d9(0x207)](Math[_0x5967d9(0x203)](_0x5caed2[_0x5967d9(0x22f)]+0x8),_0x5caed2['maxDurability'])),_0x5caed2[_0x5967d9(0x22f)]==_0x5caed2[_0x5967d9(0x225)]?(playSound(_0xafc8b6['dimension'],_0x5967d9(0x24a),_0x1c18c1,0x14),_0xafc8b6[_0x5967d9(0x24c)](_0x5967d9(0x1f1))):_0x3d1e05[_0x5967d9(0x1e9)](EquipmentSlot[_0x5967d9(0x237)],_0x494e84),_0x37c92e&&(_0x104531-=_0x37c92e[_0x5967d9(0x222)]);}else _0x208d91=!![],playSound(_0xafc8b6[_0x5967d9(0x1fb)],'bullet.impact.flesh_head',_0x1c18c1,0x14),playSound(_0xafc8b6['dimension'],_0x5967d9(0x1ed),_0x1c18c1,0x14),_0x104531*=1.5;}else playSound(_0xafc8b6['dimension'],_0x5967d9(0x22c),_0xafc8b6[_0x5967d9(0x24b)],0x14,{'volume':0.25});return _0x104531<0x1&&(_0x104531=0x1),{'damage':_0x437b74[_0x5967d9(0x212)]?0x0:_0x104531,'headshot':_0x208d91};};export const bulletEntityImpact=async _0x73a840=>{const _0x345c12=_0x1da2fa;system[_0x345c12(0x1f3)](()=>{const _0x24f03b=_0x345c12,_0x3da6c4=_0x73a840[_0x24f03b(0x20a)],_0x57625c=_0x73a840[_0x24f03b(0x1ea)];if(!_0x57625c||!_0x57625c[_0x24f03b(0x21b)]())return;if(_0x57625c['typeId']!=_0x24f03b(0x224))return;const _0x3ab718=_0x73a840[_0x24f03b(0x23b)]();if(!_0x3ab718)return;const _0x366dbc=_0x3ab718['entity'];if(!_0x366dbc||!_0x366dbc['isValid']()||!_0x366dbc[_0x24f03b(0x1fe)])return;const _0x467ed5=_0x57625c[_0x24f03b(0x242)](EntityComponentTypes['Variant'])?.['value'];if(!_0x467ed5)return;const _0x12035f=DAMAGE[_0x24f03b(0x23e)+_0x467ed5];if(!_0x12035f)return;let _0x4d0f23=_0x366dbc,_0x286a7c=calcDamage(_0x57625c,_0x3da6c4,_0x4d0f23,_0x12035f[_0x24f03b(0x22f)],_0x73a840[_0x24f03b(0x24b)]);if(_0x4d0f23[_0x24f03b(0x244)](_0x286a7c[_0x24f03b(0x22f)],{'cause':_0x3da6c4 instanceof Player?EntityDamageCause['override']:EntityDamageCause['entityAttack'],'damagingEntity':_0x3da6c4,'damagingProjectile':_0x57625c})){const _0x490923=_0x4d0f23[_0x24f03b(0x242)](EntityComponentTypes[_0x24f03b(0x1e8)])?.['currentValue'];_0x490923<=0x0&&_0x4d0f23 instanceof Player&&_0x3da6c4 instanceof Player&&_0x3da6c4[_0x24f03b(0x213)](_0x24f03b(0x215)+(_0x286a7c[_0x24f03b(0x223)]?'death.attack.bullet.head':_0x24f03b(0x20d))+'\x22,\x20\x22with\x22:\x20{\x22rawtext\x22:\x20[{\x22text\x22:\x20\x22'+_0x3da6c4[_0x24f03b(0x235)]+_0x24f03b(0x208)+_0x4d0f23['nameTag']+_0x24f03b(0x208)+_0x12035f[_0x24f03b(0x22a)]+_0x24f03b(0x247));}if(_0x3da6c4&&_0x3da6c4 instanceof Player)_0x3da6c4['triggerEvent'](_0x286a7c['headshot']?'gabrielaplok:add_hitmark_headshot':_0x24f03b(0x21e));});};
